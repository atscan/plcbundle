# PLC Bundle

```
	â €â €â €â €â €â €â €â €â €â „â €â¡€â €â €â €â €â €â €â¢€â €â €â¡€â €â¢€â €â¢€â¡€â£¤â¡¢â£¤â¡¤â¡€â¡„â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €
â €â €â €â €â €â €â €â €â €â ˆâ¡„â¡„â â¡€â ˆâ£€â €â¡ â¡ â €â£¢â£†â¢Œâ¡¾â¢™â ºâ¢½â ¾â¡‹â£»â¡·â¡«â¢µâ£­â¢¦â£´â ¦â €â¢ â €â €â¡€â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €
â €â €â €â €â €â €â €â €â¢ â£¤â£½â£¥â¡ˆâ §â£‚â¢§â¢¾â •â â ¡â Šâ â£â ‰â €â ‰â¢â €â ‰â Œâ¡‰â €â ‚â â ±â ‰â â¢â »â â£¬â¢Œâ¡Œâ£¬â£¡â£€â£¢â£„â¡„â €â¡€â €â €â €â €â €â €â €â €
â €â €â €â €â €â €â €â¢€â¢¸â£¿â£¿â¢¿â£¾â£¯â£‘â¢„â¡‚â €â „â ‚â €â €â¢€â €â €â â €â €â €â €â €â €â €â €â „â â €â €â €â €â£„â ­â ‚â ˆâ œâ£©â£¿â¢â ƒâ €â â €â €â €â €â €â €â €â €
â €â €â €â €â €â €â €â¢€â£»â¡Ÿâ â €â šâ ˆâ šâ¡‰â¡â¢¶â£±â¢¤â£…â ˆâ €â „â €â €â €â €â €â  â €â €â¡‚â â£¤â¢•â¡ªâ¢¼â£ˆâ¡¹â¡‡â â â ‹â …â¢ƒâ£ªâ¡â¡‡â¡â €â €â €â €â €â €â €â €â €
â €â €â €â €â €â €â €â €â ºâ£»â¡„â €â €â €â¢ â Œâ ƒâ â ‰â¢¡â ±â §â â¡¯â£®â¢¶â£´â£¤â¡†â¢â££â¢…â£®â¡Ÿâ ¦â â ‰â €â â â €â €â €â „â â ¡â£½â¡¸â£â¢â €â €â €â €â €â €â €â €â €
â €â €â €â €â €â €â €â¢ˆâ¡»â£§â €â â â €â €â €â €â €â €â Šâ €â •â¢€â¡‰â ˆâ¡«â ½â¡¿â¡Ÿâ ¿â Ÿâ â €â €â „â €â €â €â €â €â €â €â €â €â¢€â ¬â ¥â£‹â¡¯â €â €â €â €â €â €â €â €â €â €
â €â €â €â €â €â €â €â¡€â£¾â¡â •â¡€â €â €â €â „â  â €â €â €â €â €â €â €â €â €â €â ¥â£¤â¢Œâ €â €â €â €â €â €â €â €â €â â €â €â „â¢€â €â¢â¢â£«â¡†â¡„â €â €â €â €â €â €â €â €â €
â €â €â €â €â €â €â €â €â£½â¡¶â¡„â â¡€â €â €â €â €â €â €â¢€â €â „â €â €â €â „â â ‡â£·â¡†â €â €â €â¢€â €â €â €â €â €â €â €â €â €â €â¢€â¡¸â¢â£®â â €â €â €â €â €â €â €â €â €â €
â €â €â €â €â €â €â¢€â €â¢¾â£·â €â  â¡€â €â €â €â €â¢€â €â €â €â €â €â â¡â €â €â£¾â¡¥â –â €â €â €â ‚â €â €â €â €â €â â €â¡€â â €â €â »â¢³â£»â¢„â €â €â €â €â €â €â €â €â €â €
â €â €â €â €â €â €â €â €â£â¡™â ¨â£€â  â „â €â ‚â €â €â €â ˆâ¢€â €â €â €â €â €â ¤â¢šâ¢¢â£Ÿâ €â €â €â €â¡â €â €â¡€â €â €â €â €â â ˆâ Œâ Šâ£¯â£®â¡â ¡â ‚â €â €â €â €â €â €â €â €
â €â €â €â €â €â €â €â €â£»â¡Ÿâ¡„â¡¡â£„â €â  â €â €â¡…â €â â €â¡€â €â¡€â €â „â ˆâ ƒâ ³â ªâ ¤â €â €â €â €â¡€â €â ‚â €â €â €â â ˆâ¢ â£ â ’â »â£»â¡§â €â €â €â €â €â €â €â €â €â €
â €â €â €â €â €â €â €â €â ªâ¡â  â¢Œâ ‘â¡€â ‚â €â „â  â €â  â €â â¡€â  â  â¡€â£€â œâ¢â¡…â €â €â¡€â â €â €â â â â „â¡€â¢€â ‚â €â „â¢‘â£¿â£¿â£¿â¡€â €â €â €â €â €â €â €â €â €
â €â €â €â €â €â €â €â €â ¼â£»â §â££â£€â â ¨â â •â¢ˆâ¢€â¢€â¡â €â ˆâ  â¢€â €â â œâ£½â¡—â¡¤â €â ‚â €â  â €â¢‚â  â €â â „â €â ”â €â ‘â£¨â£¿â¢¯â ‹â¡…â €â €â €â €â €â €â €â €â €
â €â €â €â €â €â €â €â €â¡šâ£·â£­â â¢ƒâ¡—â „â¡„â¢€â â €â …â¢€â¢…â¡€â  â €â¢ â¡€â¡©â ·â¢‡â €â¡€â „â¡ â ¤â †â£€â¡€â „â ‰â£ â ƒâ ´â €â ˆâ¢â£¿â¡›â¡¯â €â €â €â €â €â €â €â €â €â €
â €â €â €â €â €â €â €â ˜â¡¬â¡¿â£¿â¡â¡»â¡¯â Œâ¢â¢›â  â “â â â â Œâ ƒâ ‹â ‚â¡¢â¢°â£ˆâ¢â£°â ‚â ˆâ €â  â ’â ¡â Œâ «â ­â ©â ¢â¡¬â †â ¿â¢·â¢¿â¡½â¡§â ‰â Šâ €â €â €â €â €â €â €â €
â €â €â €â €â €â €â €â €â ºâ£·â£ºâ£—â£¿â¡¶â¡â¡…â££â¢â  â¡…â£¢â¡–â ´â ¬â¡ˆâ ‚â¡¨â¢¡â ¾â££â£¢â €â €â¡¹â „â¡„â „â¡‡â£°â¡–â¡Šâ ”â¢¹â£„â£¿â£­â£µâ£¿â¢·â¡€â €â €â €â €â €â €â €â €â €
â €â €â €â €â €â €â €â €â ©â£¿â£¿â£²â£¿â£·â£Ÿâ£¼â Ÿâ£¬â¢‰â¡ â£ªâ¢œâ£‚â£â ¥â “â šâ¡â¢¶â£·â£ â ‚â¡„â¡¢â£€â¡â §â¢†â£’â¡²â¡³â¡«â¢Ÿâ¡ƒâ¢ªâ¡§â£Ÿâ¡Ÿâ£¯â â €â €â €â €â €â €â €â €â €
â €â €â €â €â €â €â €â €â¢ºâ Ÿâ¢¿â¢Ÿâ¢»â¡—â¡®â¡¿â£²â¢·â£†â£â£‡â¡§â£„â¢–â ¾â¡·â£¿â£¤â¢³â¢·â££â£¦â¡œâ —â£­â¢‚â ©â£¹â¢¿â¡²â¢â¡§â£•â£–â£“â£½â¡¿â¡–â¡¿â €â €â €â €â €â €â €â €â €â €
â €â €â €â €â €â €â €â €â €â €â ˆâ ‰â ‚â ‚â â ¿â¢»â£¥â¡ªâ¢½â£³â£³â£¥â¡¶â£«â£â¢â£¥â£»â£¾â¡»â£…â¢­â¡´â¢­â£¿â •â£§â¡­â£â£»â££â£»â¢¿â Ÿâ ›â ™â €â €â €â €â €â €â €â €â €â €â €â €
â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â „â ‹â «â ¯â£â¢»â£¿â£¿â£·â£•â£µâ£¹â£½â£¿â£·â£‡â¡â£¿â¡¿â£â¡â µâ ¯â â â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €
â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â â  â â ‹â¢£â “â¡â£«â ¹â£¿â£¿â£·â¡¿â ¯â ºâ â â â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €
â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â ‹â¢€â ‹â¢ˆâ¡¿â ¿â â ‰â â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €
```

> âš ï¸ **Preview Version - Do Not Use in Production!**

plcbundle archives AT Protocol's [DID PLC Directory](https://plc.directory/) operations into immutable, cryptographically-chained bundles of 10,000 operations. Each bundle is hashed (SHA-256), compressed (zstd), and linked to the previous bundle, creating a verifiable chain of DID operations.

* ğŸ“„ [Technical Specification](./docs/specification.md)
* ğŸ“š [Library Documentation](./docs/library.md)
* ğŸ’» [CLI Guide](./docs/cli.md)
* ğŸ“° [Announcement Article](https://leaflet.pub/feb982b4-64cb-4549-9d25-d7e68cecb11a)

## What is plcbundle?

plcbundle is a **format specification** for archiving PLC directory operations:

- **Bundling**: Groups 10,000 operations into compressed, immutable files
- **Chaining**: Each bundle is cryptographically linked to the previous one
- **Verifiable**: SHA-256 hashes ensure data integrity throughout the chain
- **Efficient**: Zstandard compression with ~5x compression ratios

### Implementations

- **Go** (this repository) - Full-featured CLI tool, library, and HTTP server
- [TypeScript, Python, Ruby](https://tangled.org/@atscan.net/plcbundle-ref/) - Reference implementations

---

## This Implementation (Go)

This Go implementation provides:

- ğŸ“š **Library** - Embed bundle operations in your Go applications
- ğŸ’» **CLI Tool** - Command-line interface for all operations
- ğŸŒ **HTTP Server** - Host and serve bundles over HTTP
- ğŸ”„ **Auto-sync** - Automatically fetch and bundle new operations
- ğŸ”Œ **WebSocket** - Stream operations in real-time
- ğŸ” **Spam Detection** - Built-in and custom JavaScript detectors
- âš¡ **Performance** - Parallel processing, efficient compression
- ğŸ³ **Docker** - Ready-to-deploy containers

## Installation

### Go Install

```bash
# CLI tool
go install tangled.org/atscan.net/plcbundle/cmd/plcbundle@latest

# Library
go get tangled.org/atscan.net/plcbundle
```

### Docker

```bash
# Build
docker build -t plcbundle .

# Run CLI
docker run --rm -v $(pwd)/data:/data plcbundle info
docker run --rm -v $(pwd)/data:/data plcbundle fetch

# Run as server
docker-compose up -d
```

### From Source

```bash
git clone https://tangled.org/@atscan.net/plcbundle
cd plcbundle
make build
sudo make install
```

## Quick Start

### As a Library

```go
import plcbundle "tangled.org/atscan.net/plcbundle"

mgr, _ := plcbundle.New("./plc_data", "https://plc.directory")
defer mgr.Close()

bundle, _ := mgr.FetchNext(context.Background())
// Process bundle.Operations
```

[See full library documentation â†’](./docs/library.md)

### As a CLI Tool

```bash
# Fetch bundles from plc.directory
plcbundle fetch

# Clone from remote
plcbundle clone https://plc.example.com

# Verify integrity
plcbundle verify
```

[See full CLI reference â†’](./docs/cli.md)

### With Docker

```bash
# CLI usage
docker run --rm -v $(pwd)/data:/data plcbundle info

# Server mode
docker-compose up -d
curl http://localhost:8080/
```

## Use Cases

- **Archiving**: Create verifiable backups of PLC operations
- **Mirroring**: Host your own PLC directory mirror
- **Research**: Analyze historical DID operations
- **Compliance**: Maintain tamper-evident audit trails

## Security Model

Bundles are cryptographically chained but require external verification:
- âœ… Verify against original PLC directory
- âœ… Compare with multiple independent mirrors
- âœ… Check published root and head hashes
- âœ… Anyone can reproduce bundles from PLC directory

## Documentation

- [Library Guide](./docs/library.md) - Comprehensive API documentation
- [CLI Guide](./docs/cli.md) - Command-line tool usage
- [Specification](./docs/specification.md) - Technical format specification

## License

MIT

## Contributing

Contributions welcome! Please open an issue or PR.
